(this.webpackJsonpmarioplan=this.webpackJsonpmarioplan||[]).push([[0],{218:function(e,t,a){e.exports=a(417)},223:function(e,t,a){},417:function(e,t,a){"use strict";a.r(t);var r=a(14),n=a(0),c=a.n(n),l=a(85),i=a.n(l),s=(a(223),a(8)),o=a(27),u=a(4),m=a(22),p=a.n(m),d=a(47),E=Object(u.b)(null,(function(e){return{signOut:function(){return e(function(){var e=Object(d.a)(p.a.mark((function e(t,a,r){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.getFirebase,c=n(),e.prev=2,e.next=5,c.auth().signOut();case 5:return e.abrupt("return",t({type:"SIGNOUT_SUCCESS"}));case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",t({type:"SIGNOUT_FAILED",err:e.t0}));case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,a,r){return e.apply(this,arguments)}}())}}}))((function(e){var t=e.signOut,a=e.profile;return c.a.createElement("ul",{className:"right"},c.a.createElement("li",null,c.a.createElement(s.c,{to:"/create"},"New Project")),c.a.createElement("li",null,c.a.createElement(s.c,{to:"/signin",onClick:t},"Log Out")),c.a.createElement("li",null,c.a.createElement(s.c,{to:"/",className:"btn btn-floating pink lighten-1"},a.initials)))})),f=function(){return c.a.createElement("ul",{className:"right"},c.a.createElement("li",null,c.a.createElement(s.c,{to:"/signup"},"Sign up")),c.a.createElement("li",null,c.a.createElement(s.c,{to:"/signin"},"Log in")))},b=Object(u.b)((function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}}))((function(e){var t=e.auth,a=e.profile;return c.a.createElement("nav",{className:"nav-wrapper grey light-1"},c.a.createElement("div",{className:"container"},c.a.createElement(s.b,{to:"/",className:"brand-logo"},"ProjectCreater"),t.uid?c.a.createElement(E,{profile:a}):c.a.createElement(f,null)))})),h=a(212),v=a(213),N=a(216),g=a(214),j=a(217),O=a(45),y=a.n(O),C=function(e){var t=e.notifications;return c.a.createElement("div",{className:"section"},c.a.createElement("div",{className:"card z-depth-0"},c.a.createElement("div",{className:"card-content"},c.a.createElement("span",{className:"card-title"},"Notification"),c.a.createElement("ul",{className:"notifications"},t&&t.map((function(e){return c.a.createElement("li",{key:e.id},c.a.createElement("span",{className:"pink-text"},e.user," "),c.a.createElement("span",null,e.content),c.a.createElement("div",{className:"grey-text note-data"},y()(e.time.toDate()).format("lll")))}))))))},S=function(e){var t=e.project;return c.a.createElement("div",{className:"card z-depth-0 project-summary"},c.a.createElement("div",{className:"card-content grey-text text-darken-3"},c.a.createElement("span",{className:"card-title"},t.title),c.a.createElement("p",null,"Posted by ",t.authorFirstName),c.a.createElement("p",{className:"grey-text"},y()(t.createdAt.toDate()).format("lll"))))},w=function(e){var t=e.projects;return c.a.createElement("div",{className:"project-list section"},t&&t.map((function(e){return c.a.createElement(s.b,{to:"/project/"+e.id,key:e.id},c.a.createElement(S,{project:e}))})))},F=a(17),x=a(12),I=function(e){function t(){return Object(h.a)(this,t),Object(N.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.props,t=e.projects,a=e.notifications;return c.a.createElement("div",{className:"dashboard container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col s12 m6"},c.a.createElement(w,{projects:t})),c.a.createElement("div",{className:"col s12 m5 offset-m1"},c.a.createElement(C,{notifications:a}))))}}]),t}(n.Component),P=Object(x.d)(Object(u.b)((function(e){return{projects:e.firestore.ordered.projects,notifications:e.firestore.ordered.notifications}})),Object(F.firestoreConnect)([{collection:"notifications",orderBy:["time","desc"]},{collection:"projects",orderBy:["createdAt","desc"]}]))(I),L=Object(x.d)(Object(u.b)((function(e,t){var a=t.match.params.id,r=e.firestore.data.projects;return{project:r?r[a]:null}})),Object(F.firestoreConnect)([{collection:"projects"}]))((function(e){var t=e.project;return t?c.a.createElement("div",{className:"container section project-details"},c.a.createElement("div",{className:"card z-depth-0"},c.a.createElement("div",{className:"card-content"},c.a.createElement("span",{className:"card-title"},t.title),c.a.createElement("p",null,t.content),c.a.createElement("div",{className:"card-action grey lighten-4 grey-text"},c.a.createElement("div",null,"Posted by ",t.authorFirstName," ",t.authorLastName),c.a.createElement("div",null,y()(t.createdAt.toDate()).format("lll")))))):c.a.createElement("div",{className:"container center"},c.a.createElement("p",null,"Loading project..."))})),R=a(15),k=a(46),A=Object(u.b)((function(e){return{authError:e.auth.authError}}),(function(e){return{signIn:function(t){return e(function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a,r,n){var c,l;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n.getFirebase,l=c(),t.prev=2,t.next=5,l.auth().signInWithEmailAndPassword(e.email,e.password);case 5:return t.abrupt("return",a({type:"LOGIN_SUCCESS"}));case 8:return t.prev=8,t.t0=t.catch(2),t.abrupt("return",a({type:"LOGIN_FAILED",err:t.t0}));case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e,a,r){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=Object(n.useState)({email:"",password:""}),a=Object(k.a)(t,2),l=a[0],i=a[1],s=e.authError,o=function(e){i(Object(R.a)({},l,Object(r.a)({},e.target.id,e.target.value)))};return c.a.createElement("div",{className:"container"},c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.signIn(l)},className:"white"},c.a.createElement("h5",{className:"grey-text text-darken-3"},"Log In"),c.a.createElement("div",{className:"input-field"},c.a.createElement("label",{htmlFor:"email"},"Email"),c.a.createElement("input",{type:"email",id:"email",onChange:o})),c.a.createElement("div",{className:"input-field"},c.a.createElement("label",{htmlFor:"password"},"Password"),c.a.createElement("input",{type:"password",id:"password",onChange:o})),c.a.createElement("div",{className:"input-field"},c.a.createElement("button",{type:"submit",className:"btn pink lighten-1 z-depth-0"},"Login"),c.a.createElement("div",{className:"red-text center"},s?c.a.createElement("p",null,s):null))))})),U=Object(u.b)((function(e){return{authError:e.auth.authError}}),(function(e){return{signUp:function(t){return e(function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a,r,n){var c,l,i,s,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n.getFirebase,l=n.getFirestore,i=c(),s=l(),t.prev=3,t.next=6,i.auth().createUserWithEmailAndPassword(e.email,e.password);case 6:return o=t.sent,t.next=9,s.collection("users").doc(o.user.uid).set({firstName:e.firstName,lastName:e.lastName,initials:e.firstName[0]+e.lastName[0]});case 9:return t.abrupt("return",a({type:"SIGNUP_SUCCESS"}));case 12:return t.prev=12,t.t0=t.catch(3),t.abrupt("return",a({type:"SIGNUP_FAILED",err:t.t0}));case 15:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e,a,r){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=Object(n.useState)({email:"",password:"",firstName:"",lastName:""}),a=Object(k.a)(t,2),l=a[0],i=a[1],s=function(e){i(Object(R.a)({},l,Object(r.a)({},e.target.id,e.target.value)))};return c.a.createElement("div",{className:"container"},c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.signUp(l)},className:"white"},c.a.createElement("h5",{className:"grey-text text-darken-3"},"Sign Up"),c.a.createElement("div",{className:"input-field"},c.a.createElement("label",{htmlFor:"email"},"Email"),c.a.createElement("input",{type:"email",id:"email",onChange:s})),c.a.createElement("div",{className:"input-field"},c.a.createElement("label",{htmlFor:"password"},"Password"),c.a.createElement("input",{type:"password",id:"password",onChange:s})),c.a.createElement("div",{className:"input-field"},c.a.createElement("label",{htmlFor:"firstName"},"First Name"),c.a.createElement("input",{type:"text",id:"firstName",onChange:s})),c.a.createElement("div",{className:"input-field"},c.a.createElement("label",{htmlFor:"lastName"},"Last Name"),c.a.createElement("input",{type:"text",id:"lastName",onChange:s})),c.a.createElement("div",{className:"input-field"},c.a.createElement("button",{type:"submit",className:"btn pink lighten-1 z-depth-0"},"Signup"),c.a.createElement("div",{className:"red-text center"},e.authError?c.a.createElement("p",null,e.authError):null))))})),_=Object(u.b)(null,(function(e){return{createProject:function(t){return e(function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a,r,n){var c,l,i,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.getFirebase,c=n.getFirestore,console.log("middleware:",e),l=c(),i=r().firebase.profile,s=r().firebase.auth.uid,t.prev=5,t.next=8,l.collection("projects").add(Object(R.a)({},e,{authorFirstName:i.firstName,authorLastName:i.lastName,authorId:s,createdAt:new Date}));case 8:return t.abrupt("return",a({type:"CREATE_PROJECT",project:e}));case 11:return t.prev=11,t.t0=t.catch(5),t.abrupt("return",a({type:"CREATE_PROJECT_ERROR",err:t.t0}));case 14:case"end":return t.stop()}}),t,null,[[5,11]])})));return function(e,a,r){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=Object(n.useState)({title:"",content:""}),a=Object(k.a)(t,2),l=a[0],i=a[1],s=function(e){i(Object(R.a)({},l,Object(r.a)({},e.target.id,e.target.value)))};return c.a.createElement("div",{className:"container"},c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.createProject(l),e.history.push("/")},className:"white"},c.a.createElement("h5",{className:"grey-text text-darken-3"},"Create Project"),c.a.createElement("div",{className:"input-field"},c.a.createElement("label",{htmlFor:"title"},"Title"),c.a.createElement("input",{type:"text",id:"title",onChange:s})),c.a.createElement("div",{className:"input-field"},c.a.createElement("label",{htmlFor:"content"},"Project Content"),c.a.createElement("textarea",{id:"content",className:"materialize-textarea",onChange:s})),c.a.createElement("div",{className:"input-field"},c.a.createElement("button",{type:"submit",className:"btn pink lighten-1 z-depth-0"},"Create")),c.a.createElement("h2",null,l.authorFirstName),c.a.createElement("h2",null,l.authorLastName)))})),D=a(87),T=Object(u.b)((function(e){return{auth:e.firebase.auth}}))((function(e){var t=e.component,a=e.auth,r=Object(D.a)(e,["component","auth"]);return c.a.createElement(o.b,Object.assign({},r,{render:function(e){return a.uid?c.a.createElement(t,e):c.a.createElement(o.a,{to:"/signin"})}}))})),G=Object(u.b)((function(e){return{auth:e.firebase.auth}}))((function(e){var t=e.component,a=e.restricted,r=e.auth,n=Object(D.a)(e,["component","restricted","auth"]);return c.a.createElement(o.b,Object.assign({},n,{render:function(e){return r.uid&&a?c.a.createElement(o.a,{to:"/"}):c.a.createElement(t,e)}}))}));var z=function(){return c.a.createElement(s.a,null,c.a.createElement("div",{className:"App"},c.a.createElement(b,null),c.a.createElement(o.d,null,c.a.createElement(T,{exact:!0,path:"/",component:P}),c.a.createElement(T,{path:"/project/:id",component:L}),c.a.createElement(G,{restricted:!0,path:"/signin",component:A}),c.a.createElement(G,{restricted:!0,path:"/signup",component:U}),c.a.createElement(T,{path:"/create",component:_}))))},J={authError:null},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return console.log("user signed in"),Object(R.a)({},e,{authError:null});case"LOGIN_FAILED":return console.log(t.err),Object(R.a)({},e,{authError:"login failed... ".concat(t.err)});case"SIGNOUT_SUCCESS":return console.log("logout success!"),e;case"SIGNUP_SUCCESS":return console.log("from authReducer: ",t.respon),e;case"SIGNUP_FAILED":return Object(R.a)({},e,{authError:t.err.message});default:return e}},K={},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_PROJECT":return console.log("From projectReducer: ",t.project),e;case"CREATE_PROJECT_ERROR":return console.log("create project error",t.err),e;default:return e}},q=a(48),X=Object(x.c)({auth:B,project:W,firestore:q.firestoreReducer,firebase:F.firebaseReducer}),Y=a(215),H=a(88),M=a.n(H),Q=(a(411),a(413),{apiKey:"AIzaSyCU4D6tv7n-oUAKdqX77y-lECPd5lYinPE",authDomain:"james-marioplan.firebaseapp.com",databaseURL:"https://james-marioplan.firebaseio.com",projectId:"james-marioplan",storageBucket:"james-marioplan.appspot.com",messagingSenderId:"244353969355",appId:"1:244353969355:web:9c270de3ed2c8faddcff4e"});M.a.initializeApp(Q),M.a.firestore();var V,Z=M.a,$=x.d,ee=Object(x.e)(X,$(Object(x.a)(Y.a.withExtraArgument({getFirebase:F.getFirebase,getFirestore:q.getFirestore})),Object(q.reduxFirestore)(Z,Q))),te=(V={firebase:Z,config:Q},Object(r.a)(V,"config",{useFirestoreForProfile:!0,userProfile:"users"}),Object(r.a)(V,"dispatch",ee.dispatch),Object(r.a)(V,"createFirestoreInstance",q.createFirestoreInstance),V);i.a.render(c.a.createElement(u.a,{store:ee},c.a.createElement(F.ReactReduxFirebaseProvider,te,c.a.createElement((function(e){var t=Object(u.c)((function(e){return e.firebase.auth}));return Object(F.isLoaded)(t)?e.children:c.a.createElement("div",null,"Loading Screen...")}),null,c.a.createElement(z,null)))),document.getElementById("root"))}},[[218,1,2]]]);
//# sourceMappingURL=main.1155edbc.chunk.js.map